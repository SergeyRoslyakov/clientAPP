<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="clientAPP.Pages.ClientsPage"
             Title="ClientsPage">
    <RefreshView IsRefreshing="{Binding IsBusy}"
                 Command="{Binding RefreshCommand}">

        <CollectionView ItemsSource="{Binding Clients}"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedClient}">

            <CollectionView.Header>
                <StackLayout Padding="10">
                    <Button Text="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°"
                            Command="{Binding AddClientCommand}"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="White"/>
                </StackLayout>
            </CollectionView.Header>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="15"
                           Margin="10"
                           BackgroundColor="{StaticResource Gray100}"
                           CornerRadius="10">

                        <Grid ColumnDefinitions="Auto, *"
                              RowDefinitions="Auto, Auto, Auto">

                            <Label Grid.Column="0"
                                   Grid.Row="0"
                                   Grid.RowSpan="2"
                                   Text="ðŸ‘¤"
                                   FontSize="30"
                                   VerticalOptions="Center"/>

                            <Label Grid.Column="1"
                                   Grid.Row="0"
                                   Text="{Binding FirstName}"
                                   FontAttributes="Bold"
                                   FontSize="16"/>

                            <Label Grid.Column="1"
                                   Grid.Row="1"
                                   Text="{Binding LastName}"
                                   FontSize="14"/>

                            <Label Grid.Column="1"
                                   Grid.Row="2"
                                   Text="{Binding Phone}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}"/>

                            <Label Grid.Column="2"
                                   Grid.Row="2"
                                   HorizontalOptions="End"
                                   Text="{Binding DevicesCount, StringFormat='Ð£ÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²: {0}'}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}"/>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </RefreshView>

</ContentPage>